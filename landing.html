<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    {{if .Refresh}}
    <meta http-equiv="refresh" content="{{.Refresh}}" />
    {{end}}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="static/styles.css" />
  </head>

  <body>
    <div class="wrapper">
      <br />
      <img src="static/images/logo.svg" alt="Logo" width="220" height="191" />
      <h1 class="mainTitle">Print Your Certificate</h1>
      <p>
        {{.CountPrinted}} certificates have already been printed, and
        {{.CountPending}} and waiting to be printed. See
        <a href="/list">the list</a>.
      </p>
      <div class="divider"></div>

      <form method="GET" action="/" class="form">
        <p>
          Fill in your details and create your very own certificate which will
          get printed for you to take home.
        </p>
        <input
          name="name"
          type="text"
          value="{{.Name}}"
          required
          placeholder="Your name"
        />
        <div class="inputWrapper">
          <input
            name="email"
            type="text"
            value="{{.Email}}"
            required
            placeholder="Your email address"
          />
          {{if .Error}}
          <div class="error">{{.Error}}</div>
          {{end}} {{if .DuplicateURL}}
          <div class="error">
            This email has already been used for creating a certificate:
            <a href="{{.DuplicateURL}}">click here to see it</a>.
          </div>
          {{end}}
        </div>
        <button type="submit">Get your certificate</button>
      </form>

      <div class="divider"></div>

      <p style="font-size: 10px; color: white">
        The email will not be displayed on the screen, just your name. The name
        and email are used to fill in the "Subject" field of the X.509
        certificate, and won't be used for anything else than printing the
        certificate. The data submitted stays on the Pi, and will be removed
        after the 21 May 2022 (the printed QR code will still work).
      </p>

      <div class="push"></div>
    </div>
    <footer>
      <p>
        Powered by
        <a href="https://cert-manager.io" target="_blank">cert-manager.io</a>
      </p>
      <p class="small">
        Project proudly supported by
        <a href="https://jetstack.io" target="_blank">jetstack.io</a>
      </p>
      <p class="small">
        Design by
        <a href="https://constantinchirila.com" target="_blank"
          >Constantin Chirila</a
        >
      </p>
    </footer>
    {{if .Debug}}
    <pre>{{.Debug}}</pre>
    {{end}}
  </body>
</html>

{{define "urltocertificate"}}
<a href="/certificate?certName={{.}}">{{.}}</a>
{{end}}
